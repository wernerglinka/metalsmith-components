/**
 * Header Section Styles
 *
 * Modern CSS Layout Approach:
 * - Uses cluster pattern (flex with gap) for horizontal layout
 * - Container queries for component-level responsiveness
 * - Fluid sizing with clamp() for search input
 * - Design tokens for all spacing and colors
 *
 * Design Tokens:
 * - --color-shadow
 * - --gutter
 * - --space-s
 * - --space-m-l
 * - --background-color-link-hover
 * - --color-link-navigation
 * - --color-border
 * - --background-color-light
 * - --color-text
 * - --color-text-muted
 */

header {
  position: fixed;
  top: 0;
  width: 100%;
  z-index: 100;
  box-shadow: 0 var(--space-3xs, 0.125rem) var(--space-2xs, 0.25rem) var(--color-shadow);
  background: rgb(255 255 255 / 60%);
  backdrop-filter: blur(var(--space-xs, 0.3125rem));

  /* Container setup for responsive behavior */
  container-name: header;
  container-type: inline-size;

  /* Cluster pattern: horizontal layout with flexible wrapping */
  display: flex;
  justify-content: space-between;
  flex-wrap: wrap;
  align-items: center;
  gap: var(--space-s);
  padding-inline: var(--gutter);

  /* Reset all button styles in header (including hamburger) */
  button.hamburger-menu {
    background: transparent;
    box-shadow: none;
    backdrop-filter: none;

    &:hover,
    &.active,
    &:focus,
    &:focus-visible {
      transform: none;
      background: transparent;
      box-shadow: none;
      outline: none;
    }
  }

  .misc {
    /* Cluster pattern for misc items */
    display: flex;
    align-items: center;
    gap: var(--space-s);

    /* Reset button styles for header buttons - higher specificity than global button styles */
    button.none,
    button.theme-toggle,
    button.search-icon-toggle,
    button[type='submit'] {
      background: transparent;
      box-shadow: none;
      padding: 0;
      border-radius: 0;
      backdrop-filter: none;

      &:hover {
        transform: none;
        background: transparent;
      }

      &:focus,
      &:focus-visible {
        outline: 2px solid var(--color-link-navigation);
        outline-offset: 2px;
        box-shadow: none;
      }
    }

    .search-icon-toggle {
      cursor: pointer;
      display: flex;
      align-items: center;
      justify-content: center;
      width: var(--space-m-l);
      height: var(--space-m-l);
      transition: opacity 0.3s ease;

      svg {
        stroke: var(--color-link-navigation);
        stroke-width: 1px;
      }

      &.search-active {
        opacity: 0;
        pointer-events: none;
      }
    }

    .icon-wrapper {
      display: flex;
      align-items: center;
      justify-content: center;
      border-bottom: none;
      width: var(--space-m-l);
      height: var(--space-m-l);
      background: transparent;
      transition: background 0.3s ease;

      &:hover {
        background: var(--background-color-link-hover);
      }

      svg {
        stroke: var(--color-link-navigation);
        stroke-width: 1px;
      }
    }
  }
}

/* Header search overlay - positioned below header */
.header-search-overlay {
  position: fixed;
  top: 4rem; /* Adjust based on actual header height */
  left: 0;
  right: 0;
  z-index: 90;
  background: rgb(255 255 255 / 95%);
  backdrop-filter: blur(var(--space-xs, 0.3125rem));
  box-shadow: 0 var(--space-2xs, 0.25rem) var(--space-xs, 0.5rem) var(--color-shadow);
  padding: var(--space-sm, 1rem) var(--gutter);

  /* Hidden by default */
  opacity: 0;
  visibility: hidden;
  transform: translateY(-1rem);
  transition:
    opacity 0.3s ease,
    transform 0.3s ease,
    visibility 0s 0.3s;

  &.active {
    opacity: 1;
    visibility: visible;
    transform: translateY(0);
    transition:
      opacity 0.3s ease,
      transform 0.3s ease;
  }

  .header-search-form {
    display: flex;
    align-items: center;
    gap: 0;
    max-width: 40rem;
    margin: 0 auto;
    border: 1px solid var(--color-border, #ddd);
    border-radius: var(--space-3xs, 0.25rem);
    overflow: hidden;
    background: var(--background-color-light, #fff);

    .header-search-input {
      flex: 1;
      padding: var(--space-xs, 0.75rem) var(--space-xs, 0.75rem);
      border: none;
      font-size: clamp(0.875rem, 0.8rem + 0.3vw, 1rem);
      background: transparent;
      color: var(--color-text);

      &:focus {
        outline: none;
      }

      &::placeholder {
        color: var(--color-text-muted, #999);
      }
    }

    button[type='submit'] {
      padding: var(--space-xs, 0.75rem);
      display: flex;
      align-items: center;
      justify-content: center;
      cursor: pointer;
      transition: background 0.2s ease;

      &:hover {
        background: var(--background-color-link-hover, #f5f5f5);
      }

      svg {
        stroke: var(--color-link-navigation);
        stroke-width: 2px;
      }
    }
  }
}
